<div class="max-w-6xl mx-auto space-y-6">

   <div class="max-w-6xl mx-auto space-y-6"> <div class="flex items-center justify-between mt-4"> <h1 class="text-2xl font-semibold">Espace Pro</h1> </div>


@if (me) { <div class="card p-6"> <div class="grid sm:grid-cols-2 gap-4"> <p class="text-sm"><b>Spécialité:</b> {{ me.specialite || '—' }}</p> <p class="text-sm"><b>Adresse:</b> {{ me.adresse || '—' }}</p> </div> </div> }

    <div class="grid md:grid-cols-3 gap-6">

      <section class="card p-6">
        <div class="flex items-center justify-between">
          <h3 class="font-semibold">Rendez-vous</h3>
        </div>

        @if (loading) {
          <div class="mt-4 animate-pulse space-y-3">
            <div class="h-4 bg-black/10 rounded w-28"></div>
            <div class="h-10 bg-black/10 rounded"></div>
            <div class="h-16 bg-black/10 rounded"></div>
          </div>
        } @else {
          @if (error) {
            <p class="text-sm text-red-600 mt-2">{{ error }}</p>
          }

   
          <div class="grid grid-cols-3 gap-3 mt-3">
            <div class="rounded-2xl border border-black/10 p-3">
              <p class="text-xs text-black/60">Aujourd’hui</p>
              <p class="text-2xl font-semibold">{{ todayCount }}</p>
            </div>
            <div class="rounded-2xl border border-black/10 p-3">
              <p class="text-xs text-black/60">À venir</p>
              <p class="text-2xl font-semibold">{{ upcomingCount }}</p>
            </div>
            <div class="rounded-2xl border border-black/10 p-3">
              <p class="text-xs text-black/60">Passés</p>
              <p class="text-2xl font-semibold">{{ pastCount }}</p>
            </div>
          </div>

          <div class="mt-4">
            <p class="text-xs text-muted">Prochain rendez-vous</p>
            @if (nextRdv) {
              <div class="mt-2 p-4 rounded-2xl border border-black/10">
                <div class="flex items-start justify-between gap-3">
                  <div>
                    <div class="font-medium">{{ nextRdv.serviceNom || 'Prestation' }}</div>
                    <div class="text-sm text-black/70">
                      {{ formatFr(nextRdv.date) }} — {{ nextRdv.heure }}
                      <span class="mx-1">·</span>
           
                      {{ nextRdv.clientNom || 'Client' }}
                    </div>
                    <span class="badge mt-2" [ngClass]="badgeClass(nextRdv.statut)">
                      {{ labelStatut(nextRdv.statut) }}
                    </span>
                  </div>
                  <div class="flex gap-2 shrink-0">
                    @if (nextRdv.statut === 'EN_ATTENTE') {
                      <button class="btn-ghost h-9" (click)="confirmer(nextRdv!)">Confirmer</button>
                    }
                    @if (nextRdv.statut !== 'ANNULE' && nextRdv.statut !== 'REFUSE') {
                      <button class="btn-ghost h-9 text-red-600" (click)="refuser(nextRdv!)">Refuser</button>
                    }
                  </div>
                </div>
              </div>
            } @else {
              <div class="mt-2 text-sm text-muted">Aucun rendez-vous à venir.</div>
            }
          </div>

    
          <div class="mt-4 flex flex-wrap gap-2">
            <a routerLink="/pro/rendezvous" class="btn-ghost h-9">Gérer les RDV</a>
          </div>
        }
      </section>


      <section class="card p-6">
        <h3 class="font-semibold">Disponibilités</h3>
        <p class="text-sm text-muted mt-1">Mettez à jour vos créneaux</p>
        <div class="mt-3 flex gap-2">
          <a routerLink="/pro/disponibilites" class="btn-ghost h-10">Gérer</a>
        </div>
      </section>

      <section class="card p-6">
        <h3 class="font-semibold">Services</h3>
        <p class="text-sm text-muted mt-1">Reliez vos prestations au catalogue</p>
        <div class="mt-3 flex gap-2">
          <a routerLink="/pro/services" class="btn-primary h-10">Configurer</a>
          <a routerLink="/services" class="btn-ghost h-10">Voir le catalogue</a>
        </div>
      </section>
    </div>
  </div>